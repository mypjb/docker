--- 
# gateway

apiVersion: gateway.networking.k8s.io/v1
kind: Gateway
metadata:
  name: kubernetes-dashboard
  namespace: kubernetes-dashboard
spec:
  gatewayClassName: nginx
  listeners:
    - name: ui-https
      protocol: HTTPS
      port: 443
      hostname: ui.k8s.lass.net
      tls:
        mode: Terminate
        certificateRefs:
          - kind: Secret
            group: ""
            name: kubernetes-dashboard-certs 

---
#backend tls policy

#apiVersion: gateway.networking.k8s.io/v1alpha2
#kind: BackendTLSPolicy
#metadata:
#  name: dashboard-tls-policy
#  namespace: kubernetes-dashboard
#spec:
#  targetRef:
#    kind: Service
#    name: kubernetes-dashboard
#    group: ""
#  tls:
#    wellKnownCACerts: "System"
#    hostname: ui.k8s.lass.net

---
# http route
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: kubernetes-dashboard
  namespace: kubernetes-dashboard
spec:
  parentRefs:
    - name: kubernetes-dashboard
  hostnames:
    - ui.k8s.lass.net
  rules:
    - backendRefs:
      - name: kubernetes-dashboard
        port: 443
